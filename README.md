# ü§ñ 1      –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞

## 1.1         –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–Ω—è—Ç–∏–µ. –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ —Å—Ä–µ–¥—ã –ø—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∏ –û–° legacy BIOS

–†–∞–±–æ—Ç–∞ –ø—Ä–æ–≤–æ–¥–∏—Ç—Å—è –≤ —Å—Ä–µ–¥–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã Preloader.

–í–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –º–∞—à–∏–Ω–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç –ø–æ–¥ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –û–° Debian GNU/Linux 10 –≤ –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–π —Å—Ä–µ–¥–µ XFCE4.

–î–ª—è –≤—Ö–æ–¥–∞ –≤ —Å–∏—Å—Ç–µ–º—É –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:

–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: **root**

–ü–∞—Ä–æ–ª—å: **P@ssw0rd**

–î–ª—è –ø–µ—Ä–µ–Ω–æ—Å–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö —Ñ–∞–π–ª–æ–≤ –≤ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é –º–∞—à–∏–Ω—É –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –æ–±—ä–µ–∫—Ç ‚Äì –û–±—â—É—é –ø–∞–ø–∫—É –≤ —Å–≤–æ–π—Å—Ç–≤–∞—Ö –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã (—Å–º. —Ä–∏—Å—É–Ω–æ–∫).

<figure><img src=".gitbook/assets/image (60).png" alt=""><figcaption></figcaption></figure>

–°–æ–∑–¥–∞–Ω–Ω—ã–µ –æ–±—â–∏–µ –ø–∞–ø–∫–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –≤ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ –ø–æ –ø—É—Ç–∏ **/mnt/hgfs**. –ï—Å–ª–∏ –ø–∞–ø–∫–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –ø–æ —É–∫–∞–∑–∞–Ω–Ω–æ–º—É –ø—É—Ç–∏, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—É **mount /mnt/hgfs**.

### –ù–µ–æ–±—Ö–æ–¥–∏–º–æ–µ –ü–û –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

–î–ª—è –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–Ω—è—Ç–∏—è –Ω–∞ —Ä–∞–±–æ—á–µ–π —Å—Ç–∞–Ω—Ü–∏–∏ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –ü–û:

¬∑         VMWare Workstation (–∏–ª–∏ VMware Workstation Pro);

¬∑         –†–µ–¥–∞–∫—Ç–æ—Ä HxD;

¬∑         –ö–æ–º–ø–ª–µ–∫—Ç —É—Ç–∏–ª–∏—Ç plpboot.

–î–ª—è –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ–π —Ä–∞–±–æ—Ç—ã –Ω–∞ —Ä–∞–±–æ—á—É—é —Å—Ç–∞–Ω—Ü–∏—é –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –º–∞—à–∏–Ω–∞ Preloader.

### –ë–∞–∑–æ–≤–∞—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–π —Å—Ä–µ–¥—ã

–î–ª—è –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ–π —Ä–∞–±–æ—Ç—ã –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–∑–¥–∞—Ç—å —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—É—é –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é –º–∞—à–∏–Ω—É –¥–ª—è —ç–º—É–ª—è—Ç–æ—Ä–∞ QEMU.

–î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ:

1\.       –°–æ–∑–¥–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è —Ä–∞–∑–º–µ—â–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, /root/test-machine) —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã **mkdir**.

2\.       –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∑–∞–≥—Ä—É–∑–æ—á–Ω—ã–π –æ–±—Ä–∞–∑ –¥–∏—Å–∫–æ–≤–æ–¥–∞ –¥–ª—è –≥–∏–±–∫–∏—Ö –º–∞–≥–Ω–∏—Ç–Ω—ã—Ö –¥–∏—Å–∫–æ–≤ —Å –û–° MS Dos (–∏–º—è —Ñ–∞–π–ª–∞ Dos6.22.img).

3\.       –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª-–æ–±—Ä–∞–∑ –∂–µ—Å—Ç–∫–æ–≥–æ –¥–∏—Å–∫–∞ —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã **dd if=/dev/zero of=/root/test-machine/hdimage.img bs=512 count=204800**. –í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥—ã –≤—ã –ø–æ–ª—É—á–∏—Ç–µ —Ñ–∞–π–ª —Ä–∞–∑–º–µ—Ä–æ–º 100 –ú–±, –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–π –Ω—É–ª–µ–≤—ã–º–∏ —Å–∏–º–≤–æ–ª–∞–º–∏.

4\.       –ü–æ–¥–∫–ª—é—á–∏—Ç—å —Å–æ–∑–¥–∞–Ω–Ω—ã–π –æ–±—Ä–∞–∑ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –±–ª–æ—á–Ω–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã **losetup ‚Äìf /root/test-machine/hdimage.img**. –í —Å–∏—Å—Ç–µ–º–µ —Å–æ–∑–¥–∞—Å—Ç—Å—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ —Å –∏–º–µ–Ω–µ–º /dev/loopX, –≥–¥–µ X ‚Äì –Ω–æ–º–µ—Ä –æ—Ç 0 –¥–æ 9. –ß—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å –∫–∞–∫–æ–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ñ–∞–π–ª—É –æ–±—Ä–∞–∑–∞ –¥–∏—Å–∫–∞ –º–æ–∂–Ω–æ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –∫–æ–º–∞–Ω–¥–æ–π **losetup ‚Äìa**.

5\.       –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É —Ä–∞–∑–¥–µ–ª–æ–≤ –Ω–∞ –æ–±—Ä–∞–∑–µ –∂–µ—Å—Ç–∫–æ–≥–æ –¥–∏—Å–∫–∞ –∏ —Ä–∞–∑–¥–µ–ª —Ç–∏–ø–∞ FAT16 —Å –ø–æ–º–æ—â—å—é —É—Ç–∏–ª–∏—Ç—ã fdisk, –¥–ª—è —á–µ–≥–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–º–∞–Ω–¥—É **fdisk /dev/loop**_**X**_, –ø–æ—Å–ª–µ —á–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—ã —É—Ç–∏–ª–∏—Ç—ã **o** (–¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü—ã —Ä–∞–∑–¥–µ–ª–æ–≤) **n** (–¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ä–∞–∑–¥–µ–ª–∞, –ø—Ä–∏ —ç—Ç–æ–º —É–∫–∞–∑–∞—Ç—å —Ç–∏–ø primary), **a**, —á—Ç–æ–±—ã —É–∫–∞–∑–∞—Ç—å —Å–æ–∑–¥–∞–Ω–Ω—ã–π —Ä–∞–∑–¥–µ–ª –∫–∞–∫ –∑–∞–≥—Ä—É–∑–æ—á–Ω—ã–π –∏ **t**, —á—Ç–æ–±—ã —É–∫–∞–∑–∞—Ç—å —Ç–∏–ø —Ä–∞–∑–¥–µ–ª–∞ FAT16. –ó–∞–ø–∏—Å—å —Ç–∞–±–ª–∏—Ü—ã —Ä–∞–∑–¥–µ–ª–æ–≤ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è –∫–æ–º–∞–Ω–¥–æ–π **w**, —Å–≤–µ–¥–µ–Ω–∏—è –æ —Ç–µ–∫—É—â–µ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Ç–∞–±–ª–∏—Ü—ã —Ä–∞–∑–¥–µ–ª–æ–≤ –≤—ã–≤–æ–¥—è—Ç—Å—è –∫–æ–º–∞–Ω–¥–æ–π **p**. –ö–æ–º–∞–Ω–¥–∞ **m** –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç –≤—ã–≤–µ—Å—Ç–∏ —Å–ø—Ä–∞–≤–∫—É –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é —É—Ç–∏–ª–∏—Ç—ã.

### –ò–∑—É—á–µ–Ω–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –∑–∞–≥—Ä—É–∑–∫–∏ –û–° —Å—Ä–µ–¥—Å—Ç–≤–∞–º–∏ legacy BIOS

–ó–∞–ø—É—Å–∫ —ç–º—É–ª—è—Ç–æ—Ä–∞ qemu –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è –ø–æ—Å—Ä–µ–¥—Å—Ç–≤–æ–º –∫–æ–º–∞–Ω–¥—ã qemu-system-i386, –∫–æ—Ç–æ—Ä–∞—è —Å–æ–∑–¥–∞–µ—Ç –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é –º–∞—à–∏–Ω—É —Å–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º –∞–ø–ø–∞—Ä–∞—Ç–Ω—ã–º –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ–º IBP-PC —Å–æ–≤–º–µ—Å—Ç–∏–º–æ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞.

–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Å –ø–æ–º–æ—â—å—é –æ–ø—Ü–∏–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–ø–ø–∞—Ä–∞—Ç–Ω–æ–≥–æ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã, –∞ —Ç–∞–∫–∂–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ BIOS (—Å–º. —Ç–∞–±–ª–∏—Ü—É).

| **–û–ø—Ü–∏—è**                                                                    | **–ü—Ä–∏–º–µ—á–∞–Ω–∏—è**                                                                                                                                                                                                                                                                                |
| ---------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| -fda <–∏–º—è —Ñ–∞–π–ª–∞>                                                             | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å <–∏–º—è —Ñ–∞–π–ª–∞> –≤ –∫–∞—á–µ—Å—Ç–≤–µ –æ–±—Ä–∞–∑–∞ –≥–∏–±–∫–æ–≥–æ –º–∞–≥–Ω–∏—Ç–Ω–æ–≥–æ –¥–∏—Å–∫–∞                                                                                                                                                                                                                           |
| -hda <–∏–º—è —Ñ–∞–π–ª–∞>                                                             | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å <–∏–º—è —Ñ–∞–π–ª–∞> –≤ –∫–∞—á–µ—Å—Ç–≤–µ –æ–±—Ä–∞–∑–∞ –∂–µ—Å—Ç–∫–æ–≥–æ –º–∞–≥–Ω–∏—Ç–Ω–æ–≥–æ –¥–∏—Å–∫–∞                                                                                                                                                                                                                          |
| -net <—É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ>                                                            | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å <—É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ> –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Å–µ—Ç–µ–≤–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã. –í–∞—Ä–∏–∞–Ω—Ç ‚Äìnet none —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å–µ—Ç–µ–≤–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ —É –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–ø—ã—Ç–æ–∫ –∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ —Å–µ—Ç–∏)                                                                      |
| -boot order=‚Ä¶                                                                | <p>–ó–∞–¥–∞—Ç—å –ø–æ—Ä—è–¥–æ–∫ –æ–ø—Ä–æ—Å–∞ –∑–∞–≥—Ä—É–∑–æ—á–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –¥–ª—è BIOS. –£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –∑–∞–¥–∞—é—Ç—Å—è –±—É–∫–≤–µ–Ω–Ω—ã–º–∏ –æ–±–æ–∑–Ω–∞—á–µ–Ω–∏—è–º–∏:</p><p>a ‚Äì –ø–µ—Ä–≤—ã–π –¥–∏—Å–∫–æ–≤–æ–¥ –≥–∏–±–∫–∏—Ö –º–∞–≥–Ω–∏—Ç–Ω—ã—Ö –¥–∏—Å–∫–æ–≤</p><p>b- –≤—Ç–æ—Ä–æ–π –¥–∏—Å–∫–æ–≤–æ–¥ –≥–∏–±–∫–∏—Ö –º–∞–≥–Ω–∏—Ç–Ω—ã—Ö –¥–∏—Å–∫–æ–≤</p><p>c ‚Äì –ø–µ—Ä–≤—ã–π –∂–µ—Å—Ç–∫–∏–π –¥–∏—Å–∫</p><p>d ‚Äì –ø–µ—Ä–≤—ã–π CD-ROM</p><p>n ‚Äì —Å–µ—Ç–µ–≤–æ–π –∞–¥–∞–ø—Ç–µ—Ä</p> |
| option-rom <–∏–º—è —Ñ–∞–π–ª–∞>                                                       | –ó–∞–≥—Ä—É–∑–∏—Ç—å –æ–±—Ä–∞–∑ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è PnP BIOS, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π—Å—è –≤ <–∏–º—è —Ñ–∞–π–ª–∞>                                                                                                                                                                                                                               |
| -chardev stdio,id=seabios ‚Äìdevice isa-debugcon, iobase=0x402,chardev=seabios | –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–≥–æ –ø–æ—Ä—Ç–∞ –æ—Ç–ª–∞–¥–∫–∏ –≤ —ç–∫—Ä–∞–Ω –∫–æ–Ω—Å–æ–ª–∏.                                                                                                                                                                                                                                   |

&#x20;

–ü—Ä–æ–∏–∑–≤–µ–¥–∏—Ç–µ –∑–∞–ø—É—Å–∫ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã qemu —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–º –æ–±—Ä–∞–∑–æ–º –≥–∏–±–∫–æ–≥–æ –¥–∏—Å–∫–∞ (Dos6.22.img) –∏ –∂–µ—Å—Ç–∫–æ–≥–æ –¥–∏—Å–∫–∞ (hdimage.img). –£–∫–∞–∂–∏—Ç–µ –ø–æ—Ä—è–¥–æ–∫ –∑–∞–≥—Ä—É–∑–∫–∏: —Å–Ω–∞—á–∞–ª–∞ –≥–∏–±–∫–∏–µ –¥–∏—Å–∫–∏, –∑–∞—Ç–µ–º –∂–µ—Å—Ç–∫–∏–µ –¥–∏—Å–∫–∏.

–ü—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –∑–∞–¥–∞–Ω–∏—è –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ–µ –æ–∫–Ω–æ —ç–º—É–ª—è—Ç–æ—Ä–∞ Qemu, –≤ –∫–æ—Ç–æ—Ä–æ–º –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–æ–º–∞–Ω–¥–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ –û–° MS-DOS (—Å–º. —Ä–∏—Å—É–Ω–æ–∫).

&#x20;

<figure><img src=".gitbook/assets/image (53).png" alt=""><figcaption></figcaption></figure>

–° –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã **format /S c:** –ø—Ä–æ–∏–∑–≤–µ–¥–∏—Ç–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–¥–µ–ª–∞ –∂–µ—Å—Ç–∫–æ–≥–æ –¥–∏—Å–∫–∞ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫—É –∑–∞–≥—Ä—É–∑—á–∏–∫–∞ –≤ –ø–µ—Ä–≤—ã–π —Å–µ–∫—Ç–æ—Ä —Ä–∞–∑–¥–µ–ª–∞.

–û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ç–µ–∫—É—â—É—é –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é –º–∞—à–∏–Ω—É –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –µ–µ –ø–æ–≤—Ç–æ—Ä–Ω–æ, –∏–∑–º–µ–Ω–∏–≤ –ø–æ—Ä—è–¥–æ–∫ –∑–∞–≥—Ä—É–∑–∫–∏: –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø–µ—Ä–≤–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ —É–∫–∞–∂–∏—Ç–µ –∂–µ—Å—Ç–∫–∏–π –¥–∏—Å–∫, –∞ –≥–∏–±–∫–∏–π –¥–∏—Å–∫ ‚Äì –≤ –∫–∞—á–µ—Å—Ç–≤–µ –≤—Ç–æ—Ä–æ–≥–æ. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∑–∞–≥—Ä—É–∑–∫–∞ –ø–µ—Ä–≤–æ–≥–æ —Ä–∞–∑–¥–µ–ª–∞ –∂–µ—Å—Ç–∫–æ–≥–æ –¥–∏—Å–∫–∞ –Ω–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è (—Å–∏—Å—Ç–µ–º–∞ ¬´–∑–∞–≤–∏—Å–∞–µ—Ç¬ª –ø–æ—Å–ª–µ –≤—ã–≤–æ–¥–∞ –Ω–∞–¥–ø–∏—Å–∏ ¬´Booting from Hard Disk‚Ä¶¬ª. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é –º–∞—à–∏–Ω—É.

–≠—Ç–∞ —Å–∏—Ç—É–∞—Ü–∏—è –≤—ã–∑–≤–∞–Ω–∞ —Ç–µ–º, —á—Ç–æ BIOS –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –Ω–∞–ø—Ä—è–º—É—é –∞–Ω–∞–ª–∏–∑ —Ç–∞–±–ª–∏—Ü—ã —Ä–∞–∑–¥–µ–ª–æ–≤ —Å –≤—ã–±–æ—Ä–æ–º –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Ä–∞–∑–¥–µ–ª–∞ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –û–° ‚Äì —ç—Ç—É –æ–ø–µ—Ä–∞—Ü–∏—é –¥–µ–ª–∞–µ—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –ø—Ä–µ–¥–∑–∞–≥—Ä—É–∑—á–∏–∫, —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º—ã–π –≤ –ø–µ—Ä–≤—ã–π —Å–µ–∫—Ç–æ—Ä –∂–µ—Å—Ç–∫–æ–≥–æ –¥–∏—Å–∫–∞ (–Ω–∞–∑—ã–≤–∞–µ–º—ã–π Master Boot Record ‚Äì MBR). –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω–∞—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü—ã —Ä–∞–∑–¥–µ–ª–æ–≤ —É—Ç–∏–ª–∏—Ç–∞ fdisk –Ω–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç —É—Å—Ç–∞–Ω–æ–≤–∫—É —ç—Ç–æ–≥–æ –ø—Ä–µ–¥–∑–∞–≥—Ä—É–∑—á–∏–∫–∞.

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –æ–±—Ä–∞–∑ –∂–µ—Å—Ç–∫–æ–≥–æ –¥–∏—Å–∫–∞ –Ω–∞ —Ö–æ—Å—Ç–æ–≤—É—é –º–∞—à–∏–Ω—É –∏ –æ—Ç–∫—Ä–æ–π—Ç–µ –µ–≥–æ —Å –ø–æ–º–æ—â—å—é —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ HxD. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ MBR –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∫–æ–¥ –∑–∞–≥—Ä—É–∑—á–∏–∫–∞ (—Å–µ–∫—Ç–æ—Ä –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –Ω—É–ª–µ–≤—ã—Ö –±–∞–π—Ç). –£–∫–∞–∂–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–≤—É—Ö –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –±–∞–π—Ç MBR –≤ –æ—Ç—á–µ—Ç–µ (–¥–ª–∏–Ω–∞ —Å–µ–∫—Ç–æ—Ä–∞ ‚Äì 512 –±–∞–π—Ç).

–ü–æ–º–µ–Ω—è–π—Ç–µ 2 –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –±–∞–π—Ç–∞ MBR –Ω–∞ –ª—é–±–æ–µ –¥—Ä—É–≥–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ (—Å–º. —Ä–∏—Å—É–Ω–æ–∫). –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ–±—Ä–∞–∑ –∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –µ–≥–æ –æ–±—Ä–∞—Ç–Ω–æ –Ω–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é –º–∞—à–∏–Ω—É Preloader.

<figure><img src=".gitbook/assets/image (2).png" alt=""><figcaption></figcaption></figure>

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —ç–º—É–ª—è—Ç–æ—Ä Qemu, —É–∫–∞–∑–∞–≤ –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö —Ç–æ–ª—å–∫–æ –æ–±—Ä–∞–∑ –∂–µ—Å—Ç–∫–æ–≥–æ –¥–∏—Å–∫–∞ –∏ –æ–ø—Ü–∏—é ‚Äìnet none –¥–ª—è –æ—Ç–∫–ª—é—á–µ–Ω–∏—è –ø–æ–ø—ã—Ç–æ–∫ —Å–µ—Ç–µ–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–∏. –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ BIOS –Ω–µ –ø–µ—Ä–µ–¥–∞–ª —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–¥—É, —Ä–∞–∑–º–µ—â–µ–Ω–Ω–æ–º—É –≤ —Å–µ–∫—Ç–æ—Ä–µ MBR, —Ç–∞–∫ –∫–∞–∫ –≤ –∫–æ–Ω—Ü–µ —Å–µ–∫—Ç–æ—Ä–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Å–∏–≥–Ω–∞—Ç—É—Ä–∞ MBR (—Å–º. —Ä–∏—Å—É–Ω–æ–∫).

<figure><img src=".gitbook/assets/image (1).png" alt=""><figcaption></figcaption></figure>

–ü–æ–¥–∫–ª—é—á–∏—Ç–µ –ø–æ–≤—Ç–æ—Ä–Ω–æ –æ–±—Ä–∞–∑ –∂–µ—Å—Ç–∫–æ–≥–æ –¥–∏—Å–∫–∞ –≤ –∫–∞—á–µ—Å—Ç–≤–µ loopback —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ (–ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ —É–¥–∞–ª–∏—Ç–µ —Å—Ç–∞—Ä–æ–µ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã **losetup ‚ÄìD**).

–†–∞–∑–º–µ—Å—Ç–∏—Ç–µ –≤ MBR —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø—Ä–µ–¥–∑–∞–≥—Ä—É–∑—á–∏–∫ Windows —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã\
**ms-sys --mbr7 -f /dev/loop**_**X**_

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —ç–º—É–ª—è—Ç–æ—Ä Qemu, –ø–æ–¥–∫–ª—é—á–∏–≤ –∫ –Ω–µ–º—É –æ–±—Ä–∞–∑—ã –∂–µ—Å—Ç–∫–æ–≥–æ –¥–∏—Å–∫–∞ –∏ –≥–∏–±–∫–æ–≥–æ –¥–∏—Å–∫–∞ –∏ —É–∫–∞–∑–∞–≤ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∑–∞–≥—Ä—É–∑–∫–∏ –¥–ª—è –∂–µ—Å—Ç–∫–æ–≥–æ –¥–∏—Å–∫–∞.

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–∞ –∑–∞–≥—Ä—É–∑–∫–∞ –û–° —Å –ø–µ—Ä–≤–æ–≥–æ —Ä–∞–∑–¥–µ–ª–∞ –∂–µ—Å—Ç–∫–æ–≥–æ –¥–∏—Å–∫–∞.

## 1.2         –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–Ω—è—Ç–∏–µ. –ü–µ—Ä–µ—Ö–≤–∞—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è legacy BIOS

### –ú–∞–Ω–∏–ø—É–ª—è—Ü–∏—è —Å —Ç–∞–±–ª–∏—Ü–µ–π –∑–∞–≥—Ä—É–∑–æ—á–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤

–û—Å—Ç–∞–≤–∏—Ç–µ —ç–º—É–ª—è—Ç–æ—Ä Qemu, –æ—Ç–∫–ª—é—á–∏—Ç–µ loopback —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ (–∫–æ–º–∞–Ω–¥–æ–π **losetup ‚ÄìD**).

–ü–æ–¥–∫–ª—é—á–∏—Ç–µ –æ–±—Ä–∞–∑ –∂–µ—Å—Ç–∫–æ–≥–æ –¥–∏—Å–∫–∞ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ä–∞–∑–¥–µ–ª–æ–≤ —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã **losetup ‚Äìf ‚ÄìP hdimage.img**. –¢–µ–ø–µ—Ä—å –ø–æ–º–∏–º–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ loopX —É –≤–∞—Å —Å–æ–∑–¥–∞–ª–æ—Å—å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ loopXp1, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–µ –ø–µ—Ä–≤–æ–º—É —Ä–∞–∑–¥–µ–ª—É –æ–±—Ä–∞–∑–∞ –∂–µ—Å—Ç–∫–æ–≥–æ –¥–∏—Å–∫–∞ (–º–æ–∂–µ—Ç –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è).

–°–æ–∑–¥–∞–π—Ç–µ —Ç–æ—á–∫—É –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–º–∞–Ω–¥–æ–π mkdir (–Ω–∞–ø—Ä–∏–º–µ—Ä, **mkdir /mnt/hdimg**).

–ü–æ–¥–º–æ–Ω—Ç–∏—Ä—É–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π —Ä–∞–∑–¥–µ–ª –∫–æ–º–∞–Ω–¥–æ–π **mount ‚Äìt vfat /dev/loop**_**X**_**p1 <—Ç–æ—á–∫–∞ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è>**.

–°–æ–∑–¥–∞–π—Ç–µ –∫–∞—Ç–∞–ª–æ–≥ boot –≤ –ø–æ–¥–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–º —Ä–∞–∑–¥–µ–ª–µ (**mkdir <—Ç–æ—á–∫–∞ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è>/boot**).

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤ —Å–æ–∑–¥–∞–Ω–Ω—ã–π –∫–∞—Ç–∞–ª–æ–≥ —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Ñ–∞–π–ª—ã –∑–∞–≥—Ä—É–∑—á–∏–∫–∞ GRUB (**cp ‚Äìrp /usr/lib/grub/i386-pc/ <—Ç–æ—á–∫–∞ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è>/boot/grub**)

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≥—Ä—É–∑—á–∏–∫ GRUB –≤ –ø–µ—Ä–≤—ã–π —Ä–∞–∑–¥–µ–ª –∂–µ—Å—Ç–∫–æ–≥–æ –¥–∏—Å–∫–∞ —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã\
**grub-install --boot-directory <—Ç–æ—á–∫–∞ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è>/boot --force /dev/loop**_**X**_**p1**

–û—Ç–º–æ–Ω—Ç–∏—Ä—É–π—Ç–µ –æ–±—Ä–∞–∑ –∂–µ—Å—Ç–∫–æ–≥–æ –¥–∏—Å–∫–∞ —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã **umount /dev/loopXp1** –∏ –æ—Ç–∫–ª—é—á–∏—Ç–µ loopback —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ.

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —ç–º—É–ª—è—Ç–æ—Ä Qemu, —É–∫–∞–∑–∞–≤ –æ–±—Ä–∞–∑—ã –≥–∏–±–∫–æ–≥–æ –∏ –∂–µ—Å—Ç–∫–æ–≥–æ –¥–∏—Å–∫–æ–≤ –∏ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∑–∞–≥—Ä—É–∑–∫–∏ –¥–ª—è –∂–µ—Å—Ç–∫–æ–≥–æ –¥–∏—Å–∫–∞, –∑–∞—Ç–µ–º –¥–ª—è –≥–∏–±–∫–æ–≥–æ –¥–∏—Å–∫–∞. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—Å—Ç–∏–ª—Å—è –∑–∞–≥—Ä—É–∑—á–∏–∫ GRUB (—Å–º. —Ä–∏—Å—É–Ω–æ–∫).

<figure><img src=".gitbook/assets/image (64).png" alt=""><figcaption></figcaption></figure>

–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –∑–∞–≥—Ä—É–∑–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è BIOS –≤ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–π —ç–Ω–µ—Ä–≥–æ–Ω–µ–∑–∞–≤–∏—Å–∏–º–æ–π –ø–∞–º—è—Ç–∏ (NVRAM), –≤ —Ä–æ–ª–∏ –∫–æ—Ç–æ—Ä–æ–π –≤—ã—Å—Ç—É–ø–∞–µ—Ç Flash –ø–∞–º—è—Ç—å –Ω–∞ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö –∏ –ö–ú–û–ü (CMOS) –ø–∞–º—è—Ç—å –Ω–∞ –±–æ–ª–µ–µ —Å—Ç–∞—Ä—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é Qemu —ç–º—É–ª–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É CMOS –ø–∞–º—è—Ç–∏, –ø—Ä–∏ —ç—Ç–æ–º –∑–Ω–∞—á–µ–Ω–∏—è CMOS –ø–∞–º—è—Ç–∏ –º–µ–∂–¥—É –∑–∞–ø—É—Å–∫–∞–º–∏ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è (–ø–æ —ç—Ç–æ–π –ø—Ä–∏—á–∏–Ω–µ –º—ã –∫–∞–∂–¥—ã–π —Ä–∞–∑ —É–∫–∞–∑—ã–≤–∞–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ –∑–∞–≥—Ä—É–∑–∫–∏). –í —Ä–µ–∞–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ CMOS –ø–∞–º—è—Ç–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –ø–æ—Å–ª–µ –≤—ã–∫–ª—é—á–µ–Ω–∏—è –∫–æ–º–ø—å—é—Ç–µ—Ä–∞.

–î–æ—Å—Ç—É–ø –∫ –ü–û BIOS, –ø–æ–∑–≤–æ–ª—è—é—â–µ–º—É –º–µ–Ω—è—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã BIOS (–≤ —Ç–æ–º —á–∏—Å–ª–µ, –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–≥—Ä—É–∑–∫–∏) –º–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞—â–∏—â–µ–Ω —Å –ø–æ–º–æ—â—å—é –ø–∞—Ä–æ–ª—è, —Ç–∞–∫ –∫–∞–∫ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã BIOS –∫—Ä–∏—Ç–∏—á–Ω—ã —Å —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã –≤ —Ü–µ–ª–æ–º. –í —á–∞—Å—Ç–Ω–æ—Å—Ç–∏, –∑–∞–≥—Ä—É–∑–∫–∞ —Å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–≥–æ –Ω–æ—Å–∏—Ç–µ–ª—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–ª–æ—É–º—ã—à–ª–µ–Ω–Ω–∏–∫—É –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º –∫–æ–º–ø—å—é—Ç–µ—Ä–∞ –≤ –æ–±—Ö–æ–¥ –º–µ—Ö–∞–Ω–∏–∑–º–æ–≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –û–°.

–ü—Ä–∏ —ç—Ç–æ–º –ª—é–±–æ–µ –ü–û, —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É—é—â–µ–µ –≤ —Å—Ä–µ–¥–µ BIOS (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∑–∞–≥—Ä—É–∑—á–∏–∫ –û–°) –∏–º–µ–µ—Ç —Ç–µ –∂–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø–æ —á—Ç–µ–Ω–∏—é –∏ –∑–∞–ø–∏—Å–∏ CMOS –ø–∞–º—è—Ç–∏, —á—Ç–æ –∏ –æ—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞ BIOS. –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ, –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –∏–∑–º–µ–Ω–µ–Ω –≤ –æ–±—Ö–æ–¥ –ø–∞—Ä–æ–ª—å–Ω–æ–π –∑–∞—â–∏—Ç—ã —É—Ç–∏–ª–∏—Ç—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ BIOS.

–ü–æ—Ä—è–¥–æ–∫ –∑–∞–≥—Ä—É–∑–∫–∏ BIOS —ç–º—É–ª—è—Ç–æ—Ä–∞ Qemu —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ –¥–≤—É—Ö –±–∞–π—Ç–∞—Ö –ø–∞–º—è—Ç–∏ CMOS, —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–Ω—ã—Ö –ø–æ –∞–¥—Ä–µ—Å–∞–º 0x38 –∏ 0x3D.

–ó–∞–≥—Ä—É–∑—á–∏–∫ GRUB –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –∏ –∏–∑–º–µ–Ω—è—Ç—å –ø–∞–º—è—Ç—å CMOS –ø—Ä–∏ –ø–æ–º–æ—â–∏ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö –∫–æ–º–∞–Ω–¥: cmosdump, cmosset –∏ cmosclean.

–ö–æ–º–∞–Ω–¥–∞ cmosdump –Ω–µ –∏–º–µ–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏ –≤—ã–≤–æ–¥–∏—Ç —Ç–µ–∫—É—â–µ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø–∞–º—è—Ç–∏ CMOS (—Å–º. —Ä–∏—Å—É–Ω–æ–∫).

<figure><img src=".gitbook/assets/image (12).png" alt=""><figcaption></figcaption></figure>

–ö–æ–º–∞–Ω–¥—ã cmosset –∏ cmosclean –ø–æ–∑–≤–æ–ª—è—é—Ç –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ **–±–∏—Ç—ã** —è—á–µ–µ–∫ –ø–∞–º—è—Ç–∏ CMOS. –û–±–µ –∫–æ–º–∞–Ω–¥—ã –ø—Ä–∏–Ω–∏–º–∞—é—Ç –∞—Ä–≥—É–º–µ–Ω—Ç –≤–∏–¥–∞: <–∞–¥—Ä–µ—Å —è—á–µ–π–∫–∏>:<–Ω–æ–º–µ—Ä –±–∏—Ç–∞>, –≥–¥–µ:

<–∞–¥—Ä–µ—Å —è—á–µ–π–∫–∏> ‚Äì –∞–¥—Ä–µ—Å –≤ –ø–∞–º—è—Ç–∏ CMOS, –∑–∞–ø–∏—Å–∞–Ω–Ω—ã–π –≤ **–¥–µ—Å—è—Ç–∏—á–Ω–æ–º** –≤–∏–¥–µ (–≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç cmosdump, –≤—ã–≤–æ–¥—è—â–µ–π –∞–¥—Ä–µ—Å–∞ –≤ 16-—Ç–∏—Ä–∏—á–Ω–æ–º –≤–∏–¥–µ).

<–Ω–æ–º–µ—Ä –±–∏—Ç–∞> ‚Äì –ø–æ—Ä—è–¥–∫–æ–≤—ã–π –Ω–æ–º–µ—Ä –±–∏—Ç–∞ –≤ —É–∫–∞–∑–∞–Ω–Ω–æ–π —è—á–µ–π–∫–µ CMOS, –Ω–∞—á–∏–Ω–∞—è —Å 0 (–º–ª–∞–¥—à–∏–π –±–∏—Ç) –∏ –¥–æ 7 (—Å—Ç–∞—Ä—à–∏–π –±–∏—Ç).

–ö–æ–º–∞–Ω–¥–∞ cmosset –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç —É–∫–∞–∑–∞–Ω–Ω–æ–º—É –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–µ –±–∏—Ç—É –∑–Ω–∞—á–µ–Ω–∏–µ 1, –∞ –∫–æ–º–∞–Ω–¥–∞ cmosclean –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç —É–∫–∞–∑–∞–Ω–Ω–æ–º—É –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–µ –±–∏—Ç—É –∑–Ω–∞—á–µ–Ω–∏–µ 0 (—Å–º. —Ä–∏—Å—É–Ω–æ–∫).

<figure><img src=".gitbook/assets/image (7).png" alt=""><figcaption></figcaption></figure>

–° –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥ –º–∞–Ω–∏–ø—É–ª—è—Ü–∏–∏ CMOS –ø–∞–º—è—Ç—å—é –∑–∞–≥—Ä—É–∑—á–∏–∫–∞ GRUB –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

1\.       –ò–∑–º–µ–Ω–∏—Ç–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ ¬´–≥–∏–±–∫–∏–π –¥–∏—Å–∫ ‚Äì –∂–µ—Å—Ç–∫–∏–π –¥–∏—Å–∫¬ª —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥ GRUB (–∑–∞–º–µ–Ω–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –±–∞–π—Ç–∞ 0x3D —Å 12 –Ω–∞ 21).

2\.       –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —ç–º—É–ª—è—Ç–æ—Ä (–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–æ–º –º–µ–Ω—é Machine –≤ –æ–∫–Ω–µ —ç–º—É–ª—è—Ç–æ—Ä–∞).

3\.       –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–∞ –∑–∞–≥—Ä—É–∑–∫–∞ MS-DOS —Å –≥–∏–±–∫–æ–≥–æ –¥–∏—Å–∫–∞ –≤–º–µ—Å—Ç–æ –∑–∞–≥—Ä—É–∑—á–∏–∫–∞ GRUB —Å –∂–µ—Å—Ç–∫–æ–≥–æ –¥–∏—Å–∫–∞.

### –ü–µ—Ä–µ—Ö–≤–∞—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∏ –ø–æ–º–æ—â–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π PnP BIOS

–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ PnP BIOS ‚Äì —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–µ –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–µ –ü–û, –∫–∞–∫ –ø—Ä–∞–≤–∏–ª–æ, —Ñ–∏–∑–∏—á–µ—Å–∫–∏ —Ä–∞–∑–º–µ—â–µ–Ω–Ω–æ–µ –Ω–∞ –ø–ª–∞—Ç–∞—Ö —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è. –†–∞—Å—à–∏—Ä–µ–Ω–∏—è PnP BIOS –¥–æ–ª–∂–Ω—ã –∏–º–µ—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∑–∞–≥–æ–ª–æ–≤–∫–∞, –ø–æ—Å—Ä–µ–¥—Å—Ç–≤–æ–º –∫–æ—Ç–æ—Ä–æ–π BIOS –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç –∫–æ–¥ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –µ–≥–æ.

–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∏—Ç 2 –∑–∞–≥–æ–ª–æ–≤–∫–∞:

1\.       –ó–∞–≥–æ–ª–æ–≤–æ–∫ Option ROM (—ç—Ç–æ—Ç —Ç–∏–ø —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è –¥–æ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ Plug & Play –ø–ª–∞—Ç–∞–º–∏, –ø–æ–¥–∫–ª—é—á–∞–µ–º—ã–º–∏ –∫ —à–∏–Ω–µ ISA)

2\.       –ó–∞–≥–æ–ª–æ–≤–æ–∫ PnP Expansion Header, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω–Ω—ã–µ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–µ–π Plug & Play BIOS.

–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ PnP Option ROM –∏ Expansion Header –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∞ –Ω–∞ —Ä–∏—Å—É–Ω–∫–µ.

<figure><img src=".gitbook/assets/image (27).png" alt=""><figcaption></figcaption></figure>

<figure><img src=".gitbook/assets/image (40).png" alt=""><figcaption></figcaption></figure>

–ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ Optional ROM BIOS –ø–µ—Ä–µ–¥–∞–µ—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞–ª—å–Ω–∏–º –ø–µ—Ä–µ—Ö–æ–¥–æ–º –ø–æ –∞–¥—Ä–µ—Å—É, —É–∫–∞–∑–∞–Ω–Ω–æ–º—É –≤ –ø–æ–ª–µ Initialization Entry Point –∑–∞–≥–æ–ª–æ–≤–∫–∞ Optional ROM.

–ü–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç—É, –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –∫–æ–¥ Optional ROM –¥–æ–ª–∂–µ–Ω –ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –º–∞–Ω–∏–ø—É–ª—è—Ü–∏–∏ –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞, –ø–æ—Å–ª–µ —á–µ–≥–æ –≤–µ—Ä–Ω—É—Ç—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ BIOS (–æ–ø—è—Ç—å-—Ç–∞–∫–∏, –≤ —Å–∏–ª—É —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã –≤ —Ä–µ–∞–ª—å–Ω–æ–º —Ä–µ–∂–∏–º–µ, —ç—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞–Ω–æ —Å–æ —Å—Ç–æ—Ä–æ–Ω—ã –∫–æ–¥–∞ BIOS –∏ –æ—Å—Ç–∞–µ—Ç—Å—è –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ –Ω–∞ —Å–æ–≤–µ—Å—Ç–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ Optional ROM).

–î–∞–ª–µ–µ BIOS –ø–µ—Ä–µ–¥–∞—Å—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–¥—É Optional ROM —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø–æ–∏—Å–∫–µ –∑–∞–≥—Ä—É–∑—á–∏–∫–∞ –û–° (–ø–æ –∞–Ω–∞–ª–æ–≥–∏–∏ —Å –∑–∞–≥—Ä—É–∑–∫–æ–π —Å –¥—Ä—É–≥–∏—Ö –Ω–æ—Å–∏—Ç–µ–ª–µ–π). –ü–µ—Ä–µ–¥–∞—á–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è –ø–µ—Ä–µ—Ö–æ–¥–æ–º –ø–æ –≤–µ–∫—Ç–æ—Ä—É BCV –∏–ª–∏ BEV (–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞). –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ, –ø–æ–ª—É—á–µ–Ω–Ω–æ–µ –ø–æ—Å–ª–µ –ø–µ—Ä–µ—Ö–æ–¥–∞ –ø–æ –≤–µ–∫—Ç–æ—Ä–∞–º BCV –∏–ª–∏ BEV –º–æ–∂–µ—Ç –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å—Å—è BIOS (–≤–æ–∑–≤—Ä–∞—Ç –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ç–æ–ª—å–∫–æ, –µ—Å–ª–∏ –Ω–µ —É–¥–∞–µ—Ç—Å—è –ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ –¥–∞–ª—å–Ω–µ–π—à–∏–π –ø—Ä–æ—Ü–µ—Å—Å –∑–∞–≥—Ä—É–∑–∫–∏).

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –ª—é–±–∞—è –ø–ª–∞—Ç–∞ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –∏–º–µ–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–ª–Ω–æ–≥–æ –ø–µ—Ä–µ—Ö–≤–∞—Ç–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–∞–¥ –∫–æ–º–ø—å—é—Ç–µ—Ä–æ–º –Ω–∞ –Ω–∞—á–∞–ª—å–Ω–æ–π —Ñ–∞–∑–µ –∑–∞–≥—Ä—É–∑–∫–∏.

–í—ã–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–¥–≥–æ—Ç–æ–≤–∫—É –æ–±—Ä–∞–∑–∞ Optional ROM –¥–ª—è –∏–Ω—ä–µ–∫—Ü–∏–∏ –≤ –ø—Ä–æ—Ü–µ—Å—Å –∑–∞–≥—Ä—É–∑–∫–∏:

1\.       –í –∫–∞—Ç–∞–ª–æ–≥–µ —É—Ç–∏–ª–∏—Ç plpboot –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø–æ–¥–∫–∞—Ç–∞–ª–æ–≥ plpbtrom-0.6

2\.       –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É **plpbtrom.exe plpbt.bin plpbtrom.rom**

3\.       –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª plpbtrom.rom –Ω–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é –º–∞—à–∏–Ω—É Preloader.

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —ç–º—É–ª—è—Ç–æ—Ä Qemu, —É–∫–∞–∑–∞–≤ –≤ –æ–ø—Ü–∏–∏ option-rom —Ñ–∞–π–ª plpbtrom.rom (–Ω–∞–ø—Ä–∏–º–µ—Ä, **qemu-system-i386 ‚Äìnet none ‚Äìoption-rom plpbtrom.rom**). –ü–æ—Å–ª–µ –ø–æ—è–≤–ª–µ–Ω–∏—è –Ω–∞–¥–ø–∏—Å–∏ ¬´Booting from ROM‚Ä¶¬ª –Ω–∞–∂–º–∏—Ç–µ –∫–ª–∞–≤–∏—à—É Esc –∏ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –ø–æ–ø–∞–ª–∏ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∑–∞–≥—Ä—É–∑—á–∏–∫–∞ PLP Boot Manager (—Å–º. —Ä–∏—Å—É–Ω–æ–∫).

<figure><img src=".gitbook/assets/image (8).png" alt=""><figcaption></figcaption></figure>

–í—ã–∫–ª—é—á–∏—Ç–µ —ç–º—É–ª—è—Ç–æ—Ä –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –µ–≥–æ –ø–æ–≤—Ç–æ—Ä–Ω–æ, —É–∫–∞–∑–∞–≤ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∂–µ—Å—Ç–∫–æ–≥–æ –¥–∏—Å–∫–∞ —Ñ–∞–π–ª –æ–±—Ä–∞–∑–∞ hdimage.img (—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º –∑–∞–≥—Ä—É–∑—á–∏–∫–æ–º GRUB) –∏ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∂–µ—Å—Ç–∫–∏–π –¥–∏—Å–∫. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—Ä–æ–∏–∑–æ—à–µ–ª –∑–∞–ø—É—Å–∫ –∑–∞–≥—Ä—É–∑—á–∏–∫–∞ GRUB –∏ PLP Boot Manager –±–æ–ª—å—à–µ –Ω–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –∫–ª–∞–≤–∏—à–∏ Esc. –≠—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ –ø–æ—Ç–æ–º—É, —á—Ç–æ GRUB –ø–µ—Ä–µ—Ö–≤–∞—Ç–∏–ª –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –∏ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–ª –ø–µ—Ä–µ–¥–∞—á—É —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥—Ä—É–≥–∏–º —Å–µ—Ä–≤–∏—Å–∞–º.

–ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–π—Ç–µ –æ–±—Ä–∞–∑ plpbtrom —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã **plpbtrom.exe -forceINT plpbt.bin plpbtrom.rom.** –ù–µ –∑–∞–±—É–¥—å—Ç–µ –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π —Ñ–∞–π–ª –Ω–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é –º–∞—à–∏–Ω—É.

–ü–æ–≤—Ç–æ—Ä–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç–µ —ç–º—É–ª—è—Ü–∏—é Qemu —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–º–∏ –æ–±—Ä–∞–∑–∞–º–∏ Optional ROM –∏ –∂–µ—Å—Ç–∫–æ–≥–æ –¥–∏—Å–∫–∞ (—Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º –∑–∞–≥—Ä—É–∑–∫–∏, —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º –Ω–∞ –∂–µ—Å—Ç–∫–∏–π –¥–∏—Å–∫). –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ç–µ–ø–µ—Ä—å PLP Boot Manager –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–ª –Ω–æ—Ä–º–∞–ª—å–Ω—ã–π —Ö–æ–¥ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞, –ø–µ—Ä–µ—Ö–≤–∞—Ç–∏–≤ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ —Å–µ–±—è.

–í–Ω–æ–≤—å —Å–æ–∑–¥–∞–π—Ç–µ ROM —Ñ–∞–π–ª –±–µ–∑ –ø–µ—Ä–µ—Ö–≤–∞—Ç–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (**plpbtrom.exe plpbt.bin plpbtrom.rom**). –û—Ç–∫—Ä–æ–π—Ç–µ ROM —Ñ–∞–π–ª —Ä–µ–¥–∞–∫—Ç–æ—Ä–æ–º HxD. –ù–∞–π–¥–∏—Ç–µ –≤ —Ñ–∞–π–ª–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Å—Ç—Ä–æ–∫–∏ –∏ –≤–Ω–µ—Å–∏—Ç–µ –≤ –Ω–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–º. —Ä–∏—Å—É–Ω–æ–∫). –ù–µ –º–µ–Ω—è–π—Ç–µ –æ–±—â–∏–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞.

<figure><img src=".gitbook/assets/image (15).png" alt=""><figcaption></figcaption></figure>

–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ñ–∞–π–ª –∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –µ–≥–æ –Ω–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é –º–∞—à–∏–Ω—É. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —ç–º—É–ª—è—Ç–æ—Ä —Å –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–º ROM —Ñ–∞–π–ª–æ–º –∏ –¥–æ–±–∞–≤—å—Ç–µ –æ–ø—Ü–∏—é –≤—ã–≤–æ–¥–∞ –æ—Ç–ª–∞–¥–æ—á–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –≤ –∫–æ–Ω—Å–æ–ª—å (—Å–º. —Ç–∞–±–ª–∏—Ü—É —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ Qemu). –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∑–∞–ø—É—Å–∫ –∑–∞–≥—Ä—É–∑—á–∏–∫–∞ –Ω–µ –ø—Ä–æ–∏–∑–æ—à–µ–ª, –∞ –≤ –∂—É—Ä–Ω–∞–ª–µ –æ—Ç–ª–∞–¥–∫–∏ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Å—Ç—Ä–æ–∫–∞ –≤–∏–¥–∞ ¬´Found option rom with bad checksum: loc=0x000c9800 len=44544 sum=60¬ª. –ó–∞–ø—É—Å–∫ ROM —Ñ–∞–π–ª–∞ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–ª—Å—è BIOS –ø–æ –ø—Ä–∏—á–∏–Ω–µ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω–æ–π —Å—É–º–º—ã.

–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω–æ–π —Å—É–º–º—ã Optional ROM –∫—Ä–∞–π–Ω–µ –ø—Ä–æ—Å—Ç–∞: –ø–æ–±–∞–π—Ç–æ–≤–æ —Å—É–º–º–∏—Ä—É–µ—Ç—Å—è –≤—Å–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ (–≤–∫–ª—é—á–∞—è –±–∞–π—Ç –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω–æ–π —Å—É–º–º—ã), –ø—Ä–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–º –∑–Ω–∞—á–µ–Ω–∏–∏ –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω–æ–π —Å—É–º–º—ã –Ω–∞ –≤—ã—Ö–æ–¥–µ –¥–æ–ª–∂–µ–Ω –ø–æ–ª—É—á–∏—Ç—å—Å—è 0. –û—Ç–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–π—Ç–µ –ø–æ–ª–µ –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω–æ–π —Å—É–º–º—ã (—Å–º. —Ä–∏—Å—É–Ω–∫–∏ –≤—ã—à–µ, —á—Ç–æ–±—ã –Ω–∞–π—Ç–∏ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω–æ–π —Å—É–º–º—ã). –î–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∏ –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω–æ–π —Å—É–º–º—ã –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é ¬´–ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ —Å—É–º–º—ã¬ª —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ HxD (–¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –º–µ–Ω—é ¬´–ê–Ω–∞–ª–∏–∑¬ª).

&#x20;

<figure><img src=".gitbook/assets/image (21).png" alt=""><figcaption></figcaption></figure>

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω–æ–π —Å—É–º–º—ã —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∑–∞–≥—Ä—É–∑—á–∏–∫ –≤–Ω–æ–≤—å –ø–æ–ª—É—á–∞–µ—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ç BIOS.

<figure><img src=".gitbook/assets/image (68).png" alt=""><figcaption></figcaption></figure>

## 1.3         –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–Ω—è—Ç–∏–µ. –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ —Å—Ä–µ–¥—ã –ø—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∏ –û–° UEFI

### –ù–µ–æ–±—Ö–æ–¥–∏–º–æ–µ –ü–û –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

–î–ª—è –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ–π —Ä–∞–±–æ—Ç—ã –Ω–∞ —Ä–∞–±–æ—á–µ–π —Å—Ç–∞–Ω—Ü–∏–∏ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –ü–û Microsoft Windows SDK.

### –ë–∞–∑–æ–≤–∞—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–π —Å—Ä–µ–¥—ã

–í –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ Preloader —Å–æ–∑–¥–∞–π—Ç–µ –∫–∞—Ç–∞–ª–æ–≥ –¥–ª—è test-uefi –≤ –¥–æ–º–∞—à–Ω–µ–º –∫–∞—Ç–∞–ª–æ–≥–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤ —Å–æ–∑–¥–∞–Ω–Ω—ã–π –∫–∞—Ç–∞–ª–æ–≥ –æ–±—Ä–∞–∑ UEFI —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã **cp /usr/share/ovmf/OVMF.fd \~/test-uefi/bios.bin**. –°–æ–∑–¥–∞–π—Ç–µ –≤–Ω—É—Ç—Ä–∏ –∫–∞—Ç–∞–ª–æ–≥–∞ test-uefi –µ—â–µ –æ–¥–∏–Ω –∫–∞—Ç–∞–ª–æ–≥ hd-contents.

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —ç–º—É–ª—è—Ç–æ—Ä qemu —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã **qemu-system-x86\_64 ‚Äìpflash bios.bin ‚Äìnet none ‚Äìhda fat:rw:hd-contents.**

–ü–æ—Å–ª–µ –æ–∫–æ–Ω—á–∞–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ UEFI Shell (—Å–º. —Ä–∏—Å—É–Ω–æ–∫).

<figure><img src=".gitbook/assets/image (48).png" alt=""><figcaption></figcaption></figure>

–û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —ç–º—É–ª—è—Ü–∏—é.

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ HelloWorld.efi –≤ –∫–∞—Ç–∞–ª–æ–≥ hd-contents —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã **cp /usr/src/edk2/Build/MdeModule/DEBUG\_GCC5/X64/HelloWorld.efi \~/test-uefi/hd-contents.** –ü–æ–≤—Ç–æ—Ä–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç–µ —ç–º—É–ª—è—Ü–∏—é —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã, –ø—Ä–∏–≤–µ–¥–µ–Ω–Ω–æ–π –≤—ã—à–µ.

–ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π —Ä–∞–∑–¥–µ–ª –∂–µ—Å—Ç–∫–æ–≥–æ –¥–∏—Å–∫–∞ —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã **fs0:** –∏ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ HelloWorld.efi –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –Ω–∞ –∂–µ—Å—Ç–∫–æ–º –¥–∏—Å–∫–µ —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã **dir**

<figure><img src=".gitbook/assets/image (6).png" alt=""><figcaption></figcaption></figure>

–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ HelloWorld.efi –∏ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –æ–Ω–æ —É—Å–ø–µ—à–Ω–æ –æ—Ç—Ä–∞–±–æ—Ç–∞–ª–æ (–≤—ã–≤–µ–¥–µ–Ω–∞ —Å—Ç—Ä–æ–∫–∞ ¬´UEFI Hello World!¬ª).

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, UEFI –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –≤ —Ç–æ–º —á–∏—Å–ª–µ, –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ —Å —Ñ–∞–π–ª–æ–≤—ã—Ö —Å–∏—Å—Ç–µ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã—Ö –Ω–æ—Å–∏—Ç–µ–ª–µ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏. –ß—Ç–æ–±—ã –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –∑–ª–æ—É–º—ã—à–ª–µ–Ω–Ω–∏–∫–æ–≤ –ø–æ –≤–Ω–µ–¥—Ä–µ–Ω–∏—é –≤—Ä–µ–¥–æ–Ω–æ—Å–Ω–æ–≥–æ –∫–æ–¥–∞ –Ω–∞ —É—Ä–æ–≤–Ω–µ UEFI –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–∏–º–µ–Ω—è—Ç—å –º–µ—Ö–∞–Ω–∏–∑–º SecureBoot, –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—é—â–∏–π –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –∏ –¥—Ä–∞–π–≤–µ—Ä–æ–≤ UEFI –ø–æ—Å—Ä–µ–¥—Å—Ç–≤–æ–º –∫–æ–Ω—Ç—Ä–æ–ª—è —Ü–∏—Ñ—Ä–æ–≤–æ–π –ø–æ–¥–ø–∏—Å–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π.

### –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫–ª—é—á–µ–≤–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ SecureBoot

–î–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–µ—Ö–∞–Ω–∏–∑–º SecureBoot –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ —Å–æ–∑–¥–∞—Ç—å —Ä—è–¥ –∫–ª—é—á–µ–≤–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏, –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–π –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–≥–æ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã—Ö –ø–æ–¥–ø–∏—Å–µ–π –¥–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç UEFI:

1\.       –ö–ª—é—á–µ–≤–∞—è –ø–∞—Ä–∞ –∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –æ—Ç–∫—Ä—ã—Ç–æ–≥–æ –∫–ª—é—á–∞ –¥–ª—è Platform Key (PK). –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç PK —Å–æ–∑–¥–∞–µ—Ç—Å—è –∫–∞–∫ —Å–∞–º–æ–ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ, –æ–Ω —è–≤–ª—è–µ—Ç—Å—è –∫–æ—Ä–Ω–µ–º —Ü–µ–ø–æ—á–∫–∏ –¥–æ–≤–µ—Ä–∏—è.

2\.       –ö–ª—é—á–µ–≤–∞—è –ø–∞—Ä–∞ –∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –æ—Ç–∫—Ä—ã—Ç–æ–≥–æ –∫–ª—é—á–∞ –¥–ª—è Key Exchange Key (KEK). –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç KEK –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é PK, —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –æ–Ω —è–≤–ª—è–µ—Ç—Å—è –¥–æ–≤–µ—Ä–µ–Ω–Ω—ã–º —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–º –≤—Ç–æ—Ä–æ–≥–æ —É—Ä–æ–≤–Ω—è.

–°–æ–∑–¥–∞–Ω–∏–µ –∫–ª—é—á–µ–≤–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è —Å –ø–æ–º–æ—â—å—é —É—Ç–∏–ª–∏—Ç –¥–ª—è –ø–æ–¥–ø–∏—Å–∏ –∫–æ–¥–∞, –≤—Ö–æ–¥—è—â–∏—Ö –≤ —Å–æ—Å—Ç–∞–≤ Microsoft Windows SDK.

–ù–∞ —Ö–æ—Å—Ç–æ–≤–æ–π –º–∞—à–∏–Ω–µ —Å–æ–∑–¥–∞–π—Ç–µ –∫–∞—Ç–∞–ª–æ–≥ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–ª—é—á–µ–≤–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏, –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ –¥–µ–π—Å—Ç–≤–∏—è –ø—Ä–æ–≤–æ–¥–∏—Ç–µ –≤ —ç—Ç–æ–º –∫–∞—Ç–∞–ª–æ–≥–µ.

–°–æ–∑–¥–∞–π—Ç–µ –∫–ª—é—á–µ–≤—É—é –ø–∞—Ä—É –∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç PK —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã  **C:\Program Files (x86)\Windows Kits\10\bin\10.0.18362.0\x64\makecert.exe -n "CN=Test\_PK" -r -sv TestPK.pvk TestPK.cer.** –í —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ Windows SDK —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ø–æ –¥—Ä—É–≥–æ–º—É –ø—É—Ç–∏, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º –æ—Ç–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—É—Ç—å –¥–æ —É—Ç–∏–ª–∏—Ç—ã makecert.

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —É—Ç–∏–ª–∏—Ç—ã –ø–æ—è–≤–∏—Ç—Å—è –æ–∫–Ω–æ –≤–≤–æ–¥–∞ –ø–∞—Ä–æ–ª—è –¥–ª—è –∑–∞—â–∏—Ç—ã —Å–µ–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞. –£–∫–∞–∂–∏—Ç–µ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø–∞—Ä–æ–ª—è P@ssw0rd. –ü–æ—Å–ª–µ —á–µ–≥–æ —ç–∫—Ä–∞–Ω –≤–≤–æ–¥–∞ –ø–∞—Ä–æ–ª—è –º–æ–∂–µ—Ç –ø–æ—è–≤–∏—Ç—Å—è –µ—â–µ —Ä–∞–∑ ‚Äì —Ç–µ–ø–µ—Ä—å —É–∂–µ –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø—Ä–∏ –¥–æ—Å—Ç—É–ø–µ –∫ —Å–µ–∫—Ä–µ—Ç–Ω–æ–º—É –∫–ª—é—á—É (–ø—Ä–∏ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–∏ —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –ø–æ–¥–ø–∏—Å–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞).

–í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –≤ –∫–∞—Ç–∞–ª–æ–≥–µ –¥–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è –¥–≤–∞ —Ñ–∞–π–ª–∞: TestPK.pvk ‚Äì —Ñ–∞–π–ª —Å–µ–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞ –∏ TestPK.cer ‚Äì —Ñ–∞–π–ª —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞.

–°–æ–∑–¥–∞–π—Ç–µ –∫–ª—é—á–µ–≤—É—é –ø–∞—Ä—É –∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç KEK —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã **C:\Program Files (x86)\Windows Kits\10\bin\10.0.18362.0\x64\makecert.exe -n "CN=Test\_KEK"  -iv TestPK.pvk -ic TestPK.cer -sv TestKEK.pvk TestKEK.cer.** –í —Ö–æ–¥–µ —Å–æ–∑–¥–∞–Ω–∏—è –∫–ª—é—á–µ–≤–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –≤–∞–º –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –≤–≤–µ—Å—Ç–∏ –ø–∞—Ä–æ–ª—å –¥–ª—è –Ω–æ–≤–æ–≥–æ —Å–µ–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞ (TestKEK.pvk), –∞ –∑–∞—Ç–µ–º —Å–Ω–∞—á–∞–ª–∞ –ø–∞—Ä–æ–ª—å –¥–ª—è –≤–Ω–æ–≤—å —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ —Å–µ–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞ –∏ –¥–ª—è —Ä–∞–Ω–µ–µ —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ –∫–ª—é—á–∞ PK. –ß—Ç–æ–±—ã –Ω–µ –≤–æ–∑–Ω–∏–∫–∞–ª–æ –ø—É—Ç–∞–Ω–∏—Ü—ã —Å –ø–∞—Ä–æ–ª—è–º–∏ ‚Äì –≤–µ–∑–¥–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–∞—Ä–æ–ª—å P@ssw0rd.

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª—ã —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ (—Ñ–∞–π–ª—ã —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º .cer) –≤ –∫–∞—Ç–∞–ª–æ–≥ hd-contents –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã Preloader.

### –ê–∫—Ç–∏–≤–∞—Ü–∏—è SecureBoot

UEFI —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç –≤ —Ä–µ–∂–∏–º–∞—Ö –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (Setup mode –∏ User mode) –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –Ω–∞–ª–∏—á–∏—è –≤ —Å–∏—Å—Ç–µ–º–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–≥–æ PK. –¢–µ–∫—É—â–∏–π —Ä–µ–∂–∏–º –º–æ–∂–µ—Ç –±—ã—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω –ø–æ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π UEFI SetupMode. –ï—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π —Ä–∞–≤–Ω–æ 1, —Ç–æ —Å–∏—Å—Ç–µ–º–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ä–µ–∂–∏–º–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, –µ—Å–ª–∏ 0 ‚Äì —Ç–æ –≤ —Ä–µ–∂–∏–º–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

–ü—Ä–æ—Å–º–æ—Ç—Ä–∏—Ç–µ —Ç–µ–∫—É—â–∏–π —Ä–µ–∂–∏–º UEFI —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã **setvar SetupMode**.

–í—ã–π–¥–µ—Ç–µ –∏–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è UEFI Shell —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã **exit**, –ø–æ—Å–ª–µ —á–µ–≥–æ –≤—ã –¥–æ–ª–∂–Ω—ã –ø–æ–ø–∞—Å—Ç—å –≤ —É—Ç–∏–ª–∏—Ç—É –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ UEFI (—Å–º. —Ä–∏—Å—É–Ω–æ–∫).

<figure><img src=".gitbook/assets/image (43).png" alt=""><figcaption></figcaption></figure>

–í—ã–±–µ—Ä–∏—Ç–µ –≤ –º–µ–Ω—é –ø—É–Ω–∫—Ç ¬´Device Manager¬ª, –ø–æ—Å–ª–µ —á–µ–≥–æ ¬´Secure Boot Configuration¬ª.

–í—ã–±–µ—Ä–∏—Ç–µ –ø—É–Ω–∫—Ç ¬´Secure Boot Mode¬ª –∏ –ø–µ—Ä–µ–≤–µ–¥–∏—Ç–µ UEFI –≤ —Ä–µ–∂–∏–º ¬´Custom mode¬ª. –ü–æ—Å–ª–µ —á–µ–≥–æ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –º–µ–Ω—é ¬´Custom Secure Boot Options¬ª. –î–∞–ª–µ–µ –ø–æ–≤—Ç–æ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏—è –¥–ª—è –ø—É–Ω–∫—Ç–æ–≤ ¬´PK Options¬ª –∏ ¬´KEK Options¬ª: –≤—ã–±–µ—Ä–∏—Ç–µ –ø—É–Ω–∫—Ç ¬´Enroll ‚Ä¶¬ª, ¬´Enroll ‚Ä¶ from file¬ª, –≤—ã–±–µ—Ä–∏—Ç–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π .cer —Ñ–∞–π–ª –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è. –ü–æ—Å–ª–µ –≤–Ω–µ—Å–µ–Ω–∏—è –≤ —Å–∏—Å—Ç–µ–º—É –∫–ª—é—á–µ–π –≤—ã–π–¥–µ—Ç–µ –∏–∑ —É—Ç–∏–ª–∏—Ç—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —ç–º—É–ª—è—Ü–∏—é.

–ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞ –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ HelloWorld.efi. –ù–∞ —ç—Ç–æ—Ç —Ä–∞–∑ –¥–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –Ω–∞—Ä—É—à–µ–Ω–∏–∏ –ø–æ–ª–∏—Ç–∏–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (—Å–º. —Ä–∏—Å—É–Ω–æ–∫).

<figure><img src=".gitbook/assets/image (17).png" alt=""><figcaption></figcaption></figure>

–û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —ç–º—É–ª—è—Ü–∏—é.

### –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∞–Ω–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è UEFI

–°–∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–π—Ç–µ –∫–ª—é—á KEK –∏–∑ —Ñ–æ—Ä–º–∞—Ç–∞ pvk –≤ —Ñ–æ—Ä–º–∞—Ç pfx —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã **C:\Program Files (x86)\Windows Kits\10\bin\10.0.18362.0\x64\pvk2pfx.exe -pvk TestKEK.pvk -pi P@ssw0rd -spc TestKEK.cer -pfx TestKEK.pfx -f**

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤ –∫–∞—Ç–∞–ª–æ–≥ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–ª—é—á–µ–≤–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ HelloWorld.efi –∏ —Å—Ñ–æ—Ä–º–∏—Ä—É–π—Ç–µ –¥–ª—è –Ω–µ–≥–æ —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω—É—é –ø–æ–¥–ø–∏—Å—å —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã **C:\Program Files (x86)\Windows Kits\10\bin\10.0.18362.0\x64\signtool.exe sign /ac TestKEK.cer /f TestKEK.pfx /p P@ssw0rd /fd sha256 HelloWorld.efi**. –í –ø—Ä–æ–≤–æ–¥–Ω–∏–∫–µ –æ—Ç–∫—Ä–æ–π—Ç–µ —Å–≤–æ–π—Å—Ç–≤–∞ —Ñ–∞–π–ª–∞ HelloWorld.efi –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –ø–æ–¥–ø–∏—Å–∏ –Ω–∞ –≤–∫–ª–∞–¥–∫–µ ¬´–¶–∏—Ñ—Ä–æ–≤—ã–µ –ø–æ–¥–ø–∏—Å–∏¬ª.

<figure><img src=".gitbook/assets/image (32).png" alt=""><figcaption></figcaption></figure>

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–æ–¥–ø–∏—Å–∞–Ω–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ –∫–∞—Ç–∞–ª–æ–≥ hd-contents –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã.

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —ç–º—É–ª—è—Ü–∏—é –∏ –ø–æ–ø—ã—Ç–∞–π—Ç–µ—Å—å –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ HelloWorld.efi. –ü–æ–ø—ã—Ç–∫–∞ –∑–∞–ø—É—Å–∫–∞ –≤–Ω–æ–≤—å –¥–æ–ª–∂–Ω–∞ –æ–∫–æ–Ω—á–∏—Ç—å—Å—è –Ω–µ—É—Å–ø–µ—à–Ω–æ, —Ç–∞–∫ –∫–∞–∫ –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö Secure Boot –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ —Å–∏–≥–Ω–∞—Ç—É—Ä—ã (–ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è db). –°–Ω–æ–≤–∞ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ UEFI, –≥–¥–µ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –∫ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ Custom Secure Boot Options.

–í—ã–±–µ—Ä–∏—Ç–µ –±–ª–æ–∫ DB options –∏ –ø–æ–ø–µ—Ä–µ–º–µ–Ω–Ω–æ –¥–æ–±–∞–≤—å—Ç–µ —Å–∏–≥–Ω–∞—Ç—É—Ä—ã:

1\.       –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ TestKEK.cer

2\.       –§–∞–π–ª–∞ HelloWorld.efi

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ –æ–±–æ–∏—Ö —Å–ª—É—á–∞—è—Ö —Ñ–∞–π–ª HelloWorld.efi —Å—Ç–∞–ª —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è. –û—Ç–ª–∏—á–∏–µ —ç—Ç–∏—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ —Å–æ—Å—Ç–æ–∏—Ç –≤ —Ç–æ–º, —á—Ç–æ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —Å–∏–≥–Ω–∞—Ç—É—Ä—ã —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ Secure Boot –±—É–¥–µ—Ç –¥–æ–≤–µ—Ä—è—Ç—å –≤—Å–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º, –ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–º —Å –ø–æ–º–æ—â—å—é —ç—Ç–æ–≥–æ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞, –∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –ø–æ–¥–ø–∏—Å–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è ‚Äì —Ç–æ–ª—å–∫–æ —ç—Ç–æ–º—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é. –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤–Ω–æ—Å–∏—Ç—å –∑–∞–ø–∏—Å–∏ –≤ DB –∏ DBX –≤ —Ä–µ–∞–ª—å–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö —Ç—Ä–µ–±—É–µ—Ç –Ω–∞–ª–∏—á–∏—è —Å–µ–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞ KEK –∏–ª–∏ PK, –Ω–æ –≤ —ç–º—É–ª—è—Ü–∏–∏ OVMF —Ç–∞–∫–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç.

### –ü–æ–ø—ã—Ç–∫–∞ –∑–∞–ø—É—Å–∫–∞ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

–û—Ç–∫—Ä–æ–π—Ç–µ –ø–æ–¥–ø–∏—Å–∞–Ω–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ HelloWorld.efi —Ä–µ–¥–∞–∫—Ç–æ—Ä–æ–º HxD. –ò–∑–º–µ–Ω–∏—Ç–µ —Å—Ç—Ä–æ–∫—É ¬´UEFI Hello World!¬ª, –Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–∞–∫ –ø–æ–∫–∞–∑–∞–Ω–æ –Ω–∞ —Ä–∏—Å—É–Ω–∫–µ (–∑–∞–º–µ—á–∞–Ω–∏–µ: —Å—Ç—Ä–æ–∫—É –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –ø–æ–∏—Å–∫–æ–º –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ, –Ω–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã–±—Ä–∞—Ç—å –∫–æ–¥–∏—Ä–æ–≤–∫—É UTF-16).

<figure><img src=".gitbook/assets/image (39).png" alt=""><figcaption></figcaption></figure>

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–∞–π–ª –æ–±—Ä–∞—Ç–Ω–æ –≤ –∫–∞—Ç–∞–ª–æ–≥ hd-contents –∏ –ø–æ–ø—ã—Ç–∞–π—Ç–µ—Å—å –∑–∞–ø—É—Å—Ç–∏—Ç—å –µ–≥–æ –≤ –æ–±–æ–ª–æ—á–∫–µ UEFI.

–ü–æ—Å–ª–µ —á–µ–≥–æ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ UEFI –∏ —Å–Ω–∏–º–∏—Ç–µ –æ–ø—Ü–∏—é ¬´Attempt Secure Boot¬ª –≤ —Ä–∞–∑–¥–µ–ª–µ –º–µ–Ω—é ¬´Secure Boot Configuration¬ª, —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —ç–º—É–ª—è—Ü–∏—é. –°–Ω–æ–≤–∞ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ ‚Äì –Ω–∞ —ç—Ç–æ—Ç —Ä–∞–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –∏ –≤—ã–≤–µ–¥–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–Ω—É—é —Å—Ç—Ä–æ–∫—É –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è (—Å–º. —Ä–∏—Å—É–Ω–æ–∫).

<figure><img src=".gitbook/assets/image (14).png" alt=""><figcaption></figcaption></figure>

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –º–µ—Ö–∞–Ω–∏–∑–º Secure Boot –Ω–∞–¥–µ–∂–Ω–æ –∑–∞—â–∏—â–∞–µ—Ç –æ–∫—Ä—É–∂–µ–Ω–∏–µ –ø—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∏ –∏ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –∑–∞–ø—É—Å–∫ –û–° –≤ –¥–æ–≤–µ—Ä–µ–Ω–Ω–æ–π —Å—Ä–µ–¥–µ, –≥–¥–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –≤–Ω–µ–¥—Ä–µ–Ω–Ω—ã–µ –≤—Ä–µ–¥–æ–Ω–æ—Å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã.
